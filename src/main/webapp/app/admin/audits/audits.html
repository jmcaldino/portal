<div class="block-header">
    <h2>Administraci√≥n</h2>
</div>

<div class="card">
    <div class="card-header">
        <h2>
            <span data-translate="audits.title">Audits</span>
            <small data-translate="audits.filter.title">Filter by date</small>
        </h2>

        <div class="row m-t-20">
            <div class="col-sm-6">
                <div class="input-group">
                    <span class="input-group-btn">
                        <label for="fecha1" class="m-r-10">
                            <h4 data-translate="audits.filter.from">Desde:</h4>
                        </label>
                    </span>
                    <input type="text" name="fecha1" class="form-control" uib-datepicker-popup="dd-MM-yyyy" is-open="vm.filter.desde.opened"
                        ng-model="vm.filter.desde.model" ng-change="vm.onChangeFilter()" datepicker-options="vm.filter.desde.options"
                        show-button-bar="false" />
                    <span class="input-group-btn">
                        <button type="button" class="btn btn-default" ng-click="vm.filter.desde.open()">
                            <i class="glyphicon glyphicon-calendar"></i>
                        </button>
                    </span>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="input-group">
                    <span class="input-group-btn">
                        <label for="fecha2" class="m-r-10">
                            <h4 data-translate="audits.filter.to">Hasta:</h4>
                        </label>
                    </span>
                    <input type="text" name="fecha2" class="form-control" uib-datepicker-popup="dd-MM-yyyy" is-open="vm.filter.hasta.opened"
                        ng-model="vm.filter.hasta.model" ng-change="vm.onChangeFilter()" datepicker-options="vm.filter.hasta.options"
                        show-button-bar="false" />
                    <span class="input-group-btn">
                        <button type="button" class="btn btn-default" ng-click="vm.filter.hasta.open()">
                            <i class="glyphicon glyphicon-calendar"></i>
                        </button>
                    </span>
                </div>
            </div>
        </div>
        <div class="row m-t-20">
            <div class="col-sm-6">
                <div class="input-group">
                    <span class="input-group-btn">
                        <label for="fecha1" class="m-r-10">
                            <h4 data-translate="audits.filter.user">user</h4>
                        </label>
                    </span>
                    <input type="text" ng-model-options="{debounce:1000}" class="input-sm form-control " name="user
                            "
                        ng-model="vm.user " ng-change="vm.onChangeFilter() " required />
                </div>
            </div>
            <div class="col-sm-6 ">
                <div class="input-group ">
                    <span class="input-group-btn ">
                        <label for="fecha1 " class="m-r-10 ">
                            <h4 data-translate="audits.filter.category ">category</h4>
                        </label>
                    </span>
                    <select class="input-sm form-control " name="categoryCombo " id="categoryCombo " ng-options="item.id
                            as item.display for item in vm.categories "
                        ng-model="vm.category " ng-change="vm.onChangeFilter() " placeholder="Seleccione la categoria "></select>
                </div>
            </div>
        </div>
    </div>

    <div class="card-body ">
        <div class="table-responsive ">
            <table ng-table="vm.tableSorting " class="table table-striped table-vmiddle " printable-table="Auditorias ">
                <tr ng-repeat="w in $data ">
                    <td data-title=" 'Fecha' " sortable=" 'auditEventDate' ">
                        <span>{{w.timestamp| date:'medium'}}</span>
                    </td>
                    <td ng-if="!w.data.exception" data-title=" 'Usuario' " sortable=" 'principal' ">
                        {{w.principal}}
                    </td>
                    <td data-title=" 'Categoria' " sortable=" 'auditEventType' ">
                        {{w.type}}
                    </td>
                    <td ng-if="w.data.exception" data-title=" 'MensajeException' " sortable=" 'MensajeException' ">
                        {{w.data.exception}}
                    </td>
                    <td data-title=" 'Extras' ">
                        <span ng-show="w.data.message ">{{w.data.message}}</span>
                        <span ng-show="w.data.remoteAddress ">
                            <span data-translate="audits.table.data.remoteAddress ">
                                Remote Address
                            </span> {{w.data.remoteAddress}}
                        </span>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</div>