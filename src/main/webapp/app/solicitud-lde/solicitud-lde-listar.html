<jhi-alert></jhi-alert>
<div class="container" style="background-color:white;">
    <div class="row p-t-20" style="background-color:whitesmoke;">
        <div class="col-12">
            <div class="block-header">
                <h2>Listado LDE</h2>
            </div>
        </div>
    </div>
    <div class="card-header">
        <ul class="actions">
            <li has-any-authority="ROLE_AGENTE_MARITIMO, ROLE_ADMIN">
                <button class="btn bgm-blue waves-effect" ui-sref="">
                    <i class="zmdi zmdi-plus-box zmdi-hc-fw"></i> Crear LDE
                </button>
            </li>
        </ul>
    </div>

    <div class="card">
        <div style="margin-left:2%;">
            <form name="ListLDEForm" role="form" novalidate ng-submit="vm.buscar()">
                <div class="row p-t-20">
                    <div class="col-sm-4">
                        <div class="form-group">
                            <div class="fg-line">
                                <input type="text" class="form-control input-agp" name="contenedor" ng-model="vm.buscarPorUnit"
                                    placeholder="Ingrese nro. de Contenedor">
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group">
                            <select class="select-agp" id="exampleFormControlSelect1" ng-options="option.name for option in vm.estadoFiltro.availableOptions track by option.id"
                                ng-model="vm.estadoFiltro.selectedOption">
                            </select>
                        </div>
                    </div>
                    <div class="col-sm-2 p-t-5">
                        <button type="submit" class="btn bgm-blue waves-effect" style="border: 50%; margin-top:1%;" ng-disabled="ListLDEForm.$invalid">
                            <i class="zmdi zmdi-search"></i> Buscar
                        </button>
                    </div>
                </div>
                <hr>
            </form>
        </div>
        <div class="card-body">
            <jhi-alert-error></jhi-alert-error>
            <div class="table-responsive">
                <table ng-table="vm.tableSorting" class="table table-striped table-vmiddle">
                    <tr ng-repeat="w in $data" ng-if="$data.length > 0">
                        <td data-title="'Id  '" sortable="'id'">
                            <strong>{{ w.id }}</strong>
                        </td>
                        <td data-title="'NBR'">
                            {{ w.lde.contenedor.nbr }}
                        </td>
                        <td data-title="'Terminal'">
                            {{ w.lde.terminal }}
                        </td>
                        <td data-title="'Buque'">
                            {{ w.lde.buque }}
                        </td>
                        <td data-title="'Cuit'">
                            {{ w.lde.cuit }}
                        </td>
                        <td data-title="'Estado'">
                            {{ w.estado }}
                        </td>
                        <td data-title="'Contenedor'">
                            {{ w.lde.contenedor.estado }}
                        </td>

                        <td data-title="'Creación'" sortable="'createdDate'">
                            {{ w.createdDate | date : "yyyy-MM-dd HH:mm" }}
                        </td>
                        <td data-title="'Agente Maritimo'">
                            {{ w.createdBy }}
                        </td>
                        <td data-title="'Acciones'" width="20%">

                            <span class="tooltip2">
                                <button class="btn btn-default waves-effect " ui-sref="solicitud-lde.detalle({id:w.id})">
                                    <i class="zmdi zmdi-eye" style=" color:#4da6ff"></i>
                                </button>
                                <span class="tooltiptext">Detalle</span>
                            </span>
                            <span class="tooltip2">
                                <button has-any-authority="ROLE_AGENTE_MARITIMO, ROLE_ADMIN" class="btn btn-default waves-effect"
                                    ui-sref="solicitud-lde.editar({id:w.id})">
                                    <i class="zmdi zmdi-edit"></i>
                                </button>
                                <span class="tooltiptext">Cambiar Lugar de Devolución</span>
                            </span>
                            <span class="tooltip2">
                                <button ng-show="w.lde.contenedor.estado == 'ACTIVO' && w.estado == 'Anulado'"
                                    has-any-authority="ROLE_AGENTE_MARITIMO, ROLE_ADMIN" class="btn btn-default waves-effect"
                                    ng-click="vm.habilitarLde(w.lde.contenedor.nbr, w.lde.viaje)">
                                    <i class="zmdi zmdi-check-circle" style=" color:green"></i>
                                </button>
                                <span class="tooltiptext">Habilitar LDE</span>
                            </span>
                            <span class="tooltip2">
                                <button ng-show="w.lde.contenedor.estado == 'ACTIVO' && w.estado == 'Habilitado'"
                                    has-any-authority="ROLE_AGENTE_MARITIMO, ROLE_ADMIN" class="btn btn-default waves-effect"
                                    ng-click="vm.anularLde(w.lde.contenedor.nbr, w.lde.viaje)">
                                    <i class="zmdi zmdi-close-circle" style=" color:red"></i>
                                </button>
                                <span class="tooltiptext">Anular LDE</span>
                            </span>
                            <span class="tooltip2">
                                <button ng-show="w.lde.contenedor.estado == 'ACTIVO' && w.estado != 'Anulado'"
                                    has-any-authority="ROLE_TERMINAL_PORTUARIA, ROLE_ADMIN" class="btn btn-default waves-effect"
                                    ui-sref="solicitud-lde.retirar({id:w.id})">
                                    <i class="zmdi zmdi-truck" style=" color:red"></i>
                                    <!-- ng-click="vm.retirarContenedor(w.lde.contenedor.nbr, w.lde.viaje)" -->
                                </button>
                                <span class="tooltiptext">Retirar Contenedor</span>
                            </span>
                        </td>
                    </tr>
                    <tr ng-if="$data.length == 0">
                        <td colspan="8">Actualmente no hay libre de deuda generado.</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>